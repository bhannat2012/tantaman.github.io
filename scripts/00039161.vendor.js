if(function(a){function b(a,b,c){for(var d=(c||0)-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function c(a,c){var d=typeof c;if(a=a.cache,"boolean"==d||null==c)return a[c];"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:t+c;return a=a[d]||(a[d]={}),"object"==d?a[e]&&b(a[e],c)>-1?0:-1:a[e]?0:-1}function d(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:t+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a)==this.array.length&&(b[c]=!1):e[d]=!0}}function e(a){return a.charCodeAt(0)}function f(a,b){var c=a.index,d=b.index;if(a=a.criteria,b=b.criteria,a!==b){if(a>b||"undefined"==typeof a)return 1;if(b>a||"undefined"==typeof b)return-1}return d>c?-1:1}function g(a){var b=-1,c=a.length,e=j();e["false"]=e["null"]=e["true"]=e.undefined=!1;var f=j();for(f.array=a,f.cache=e,f.push=d;++b<c;)f.push(a[b]);return e.object===!1?(l(f),null):f}function h(a){return"\\"+W[a]}function i(){return p.pop()||[]}function j(){return q.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null}}function k(a){a.length=0,p.length<v&&p.push(a)}function l(a){var b=a.cache;b&&l(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,q.length<v&&q.push(a)}function m(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function n(d){function p(a){return a&&"object"==typeof a&&!Bd(a)&&hd.call(a,"__wrapped__")?a:new q(a)}function q(a){this.__wrapped__=a}function v(a,b,c,d){function e(){var d=arguments,j=g?this:b;if(f||(a=b[h]),c.length&&(d=d.length?(d=wd.call(d),i?d.concat(c):c.concat(d)):c),this instanceof e){j=W(a.prototype);var k=a.apply(j,d);return qb(k)?k:j}return a.apply(j,d)}var f=pb(a),g=!c,h=b;if(g){var i=d;c=b}else if(!f){if(!d)throw new Yc;b=a}return e}function W(a){return qb(a)?nd(a):{}}function X(a){return Ed[a]}function Z(){var a=(a=p.indexOf)===ac?b:a;return a}function _(a){return function(b,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d=e&&e[c]===b?o:c,c=!1),null!=d&&(d=p.createCallback(d,e)),a(b,c,d,e)}}function ab(a){var b,c;return a&&ld.call(a)==R&&(b=a.constructor,!pb(b)||b instanceof b)?(Id(a,function(a,b){c=b}),c===o||hd.call(a,c)):!1}function bb(a){return Fd[a]}function cb(a){return ld.call(a)==L}function db(a,b,c,d,e,f){var g=a;if("boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),"function"==typeof c){if(c="undefined"==typeof d?c:p.createCallback(c,d,1),g=c(g),"undefined"!=typeof g)return g;g=a}var h=qb(g);if(h){var j=ld.call(g);if(!U[j])return g;var l=Bd(g)}if(!h||!b)return h?l?m(g):Gd({},g):g;var n=zd[j];switch(j){case N:case O:return new n(+g);case Q:case T:return new n(g);case S:return n(g.source,B.exec(g))}var q=!e;e||(e=i()),f||(f=i());for(var r=e.length;r--;)if(e[r]==a)return f[r];return g=l?n(g.length):{},l&&(hd.call(a,"index")&&(g.index=a.index),hd.call(a,"input")&&(g.input=a.input)),e.push(a),f.push(g),(l?Jb:Jd)(a,function(a,d){g[d]=db(a,b,c,o,e,f)}),q&&(k(e),k(f)),g}function eb(a,b,c){return db(a,!0,b,c)}function fb(a,b,c){var d;return a=p.createCallback(a,c),Jd(b,function(b,c,e){return a(b,c,e)?(d=c,!1):void 0}),d}function gb(a){var b=[];return Id(a,function(a,c){pb(a)&&b.push(c)}),b.sort()}function hb(a,b){return a?hd.call(a,b):!1}function ib(a){for(var b=-1,c=Dd(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function jb(a){return a===!0||a===!1||ld.call(a)==N}function kb(a){return a?"object"==typeof a&&ld.call(a)==O:!1}function lb(a){return a?1===a.nodeType:!1}function mb(a){var b=!0;if(!a)return b;var c=ld.call(a),d=a.length;return c==M||c==T||c==L||c==R&&"number"==typeof d&&pb(a.splice)?!d:(Jd(a,function(){return b=!1}),b)}function nb(a,b,c,d,e,f){var g=c===s;if("function"==typeof c&&!g){c=p.createCallback(c,d,2);var h=c(a,b);if("undefined"!=typeof h)return!!h}if(a===b)return 0!==a||1/a==1/b;var j=typeof a,l=typeof b;if(a===a&&(!a||"function"!=j&&"object"!=j)&&(!b||"function"!=l&&"object"!=l))return!1;if(null==a||null==b)return a===b;var m=ld.call(a),n=ld.call(b);if(m==L&&(m=R),n==L&&(n=R),m!=n)return!1;switch(m){case N:case O:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case T:return a==Xc(b)}var o=m==M;if(!o){if(hd.call(a,"__wrapped__ ")||hd.call(b,"__wrapped__"))return nb(a.__wrapped__||a,b.__wrapped__||b,c,d,e,f);if(m!=R)return!1;var q=a.constructor,r=b.constructor;if(q!=r&&!(pb(q)&&q instanceof q&&pb(r)&&r instanceof r))return!1}var t=!e;e||(e=i()),f||(f=i());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(h=!0,e.push(a),f.push(b),o){if(u=a.length,v=b.length,h=v==a.length,!h&&!g)return h;for(;v--;){var w=u,x=b[v];if(g)for(;w--&&!(h=nb(a[w],x,c,d,e,f)););else if(!(h=nb(a[v],x,c,d,e,f)))break}return h}return Id(b,function(b,g,i){return hd.call(i,g)?(v++,h=hd.call(a,g)&&nb(a[g],b,c,d,e,f)):void 0}),h&&!g&&Id(a,function(a,b,c){return hd.call(c,b)?h=--v>-1:void 0}),t&&(k(e),k(f)),h}function ob(a){return pd(a)&&!qd(parseFloat(a))}function pb(a){return"function"==typeof a}function qb(a){return!(!a||!V[typeof a])}function rb(a){return tb(a)&&a!=+a}function sb(a){return null===a}function tb(a){return"number"==typeof a||ld.call(a)==Q}function ub(a){return a?"object"==typeof a&&ld.call(a)==S:!1}function vb(a){return"string"==typeof a||ld.call(a)==T}function wb(a){return"undefined"==typeof a}function xb(a,b,c){var d=arguments,e=0,f=2;if(!qb(a))return a;if(c===s)var g=d[3],h=d[4],j=d[5];else{var l=!0;h=i(),j=i(),"number"!=typeof c&&(f=d.length),f>3&&"function"==typeof d[f-2]?g=p.createCallback(d[--f-1],d[f--],2):f>2&&"function"==typeof d[f-1]&&(g=d[--f])}for(;++e<f;)(Bd(d[e])?Jb:Jd)(d[e],function(b,c){var d,e,f=b,i=a[c];if(b&&((e=Bd(b))||Kd(b))){for(var k=h.length;k--;)if(d=h[k]==b){i=j[k];break}if(!d){var l;g&&(f=g(i,b),(l="undefined"!=typeof f)&&(i=f)),l||(i=e?Bd(i)?i:[]:Kd(i)?i:{}),h.push(b),j.push(i),l||(i=xb(i,b,s,g,h,j))}}else g&&(f=g(i,b),"undefined"==typeof f&&(f=b)),"undefined"!=typeof f&&(i=f);a[c]=i});return l&&(k(h),k(j)),a}function yb(a,b,c){var d=Z(),e="function"==typeof a,f={};if(e)a=p.createCallback(a,c);else var g=dd.apply(Zc,wd.call(arguments,1));return Id(b,function(b,c,h){(e?!a(b,c,h):d(g,c)<0)&&(f[c]=b)}),f}function zb(a){for(var b=-1,c=Dd(a),d=c.length,e=Pc(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Ab(a,b,c){var d={};if("function"!=typeof a)for(var e=-1,f=dd.apply(Zc,wd.call(arguments,1)),g=qb(b)?f.length:0;++e<g;){var h=f[e];h in b&&(d[h]=b[h])}else a=p.createCallback(a,c),Id(b,function(b,c,e){a(b,c,e)&&(d[c]=b)});return d}function Bb(a,b,c,d){var e=Bd(b);if(a=p.createCallback(a,d,4),null==c)if(e)c=[];else{var f=b&&b.constructor,g=f&&f.prototype;c=W(g)}return(e?Jb:Jd)(b,function(b,d,e){return a(c,b,d,e)}),c}function Cb(a){for(var b=-1,c=Dd(a),d=c.length,e=Pc(d);++b<d;)e[b]=a[c[b]];return e}function Db(a){for(var b=-1,c=dd.apply(Zc,wd.call(arguments,1)),d=c.length,e=Pc(d);++b<d;)e[b]=a[c[b]];return e}function Eb(a,b,c){var d=-1,e=Z(),f=a?a.length:0,g=!1;return c=(0>c?sd(0,f+c):c)||0,f&&"number"==typeof f?g=(vb(a)?a.indexOf(b,c):e(a,b,c))>-1:Jd(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Fb(a,b,c){var d={};return a=p.createCallback(a,c),Jb(b,function(b,c,e){c=Xc(a(b,c,e)),hd.call(d,c)?d[c]++:d[c]=1}),d}function Gb(a,b,c){var d=!0;a=p.createCallback(a,c);var e=-1,f=b?b.length:0;if("number"==typeof f)for(;++e<f&&(d=!!a(b[e],e,b)););else Jd(b,function(b,c,e){return d=!!a(b,c,e)});return d}function Hb(a,b,c){var d=[];a=p.createCallback(a,c);var e=-1,f=b?b.length:0;if("number"==typeof f)for(;++e<f;){var g=b[e];a(g,e,b)&&d.push(g)}else Jd(b,function(b,c,e){a(b,c,e)&&d.push(b)});return d}function Ib(a,b,c){a=p.createCallback(a,c);var d=-1,e=b?b.length:0;if("number"!=typeof e){var f;return Jd(b,function(b,c,d){return a(b,c,d)?(f=b,!1):void 0}),f}for(;++d<e;){var g=b[d];if(a(g,d,b))return g}}function Jb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:p.createCallback(b,c),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else Jd(a,b);return a}function Kb(a,b,c){var d={};return b=p.createCallback(b,c),Jb(a,function(a,c,e){c=Xc(b(a,c,e)),(hd.call(d,c)?d[c]:d[c]=[]).push(a)}),d}function Lb(a,b){var c=wd.call(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Pc("number"==typeof f?f:0);return Jb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function Mb(a,b,c){var d=-1,e=b?b.length:0;if(a=p.createCallback(a,c),"number"==typeof e)for(var f=Pc(e);++d<e;)f[d]=a(b[d],d,b);else f=[],Jd(b,function(b,c,e){f[++d]=a(b,c,e)});return f}function Nb(a,b,c){var d=-1/0,f=d;if(!b&&Bd(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];i>f&&(f=i)}else b=!b&&vb(a)?e:p.createCallback(b,c),Jb(a,function(a,c,e){var g=b(a,c,e);g>d&&(d=g,f=a)});return f}function Ob(a,b,c){var d=1/0,f=d;if(!b&&Bd(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];f>i&&(f=i)}else b=!b&&vb(a)?e:p.createCallback(b,c),Jb(a,function(a,c,e){var g=b(a,c,e);d>g&&(d=g,f=a)});return f}function Pb(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var e=Pc(d);++c<d;)e[c]=a[c][b];return e||Mb(b,a)}function Qb(a,b,c,d){if(!b)return c;var e=arguments.length<3;a=p.createCallback(a,d,4);var f=-1,g=b.length;if("number"==typeof g)for(e&&(c=b[++f]);++f<g;)c=a(c,b[f],f,b);else Jd(b,function(b,d,f){c=e?(e=!1,b):a(c,b,d,f)});return c}function Rb(a,b,c,d){var e=b,f=b?b.length:0,g=arguments.length<3;if("number"!=typeof f){var h=Dd(b);f=h.length}return a=p.createCallback(a,d,4),Jb(b,function(b,d,i){d=h?h[--f]:--f,c=g?(g=!1,e[d]):a(c,e[d],d,i)}),c}function Sb(a,b,c){return a=p.createCallback(a,c),Hb(function(b,c,d){return!a(b,c,d)},b)}function Tb(a){var b=-1,c=a?a.length:0,d=Pc("number"==typeof c?c:0);return Jb(a,function(a){var c=ed(vd()*(++b+1));d[b]=d[c],d[c]=a}),d}function Ub(a){var b=a?a.length:0;return"number"==typeof b?b:Dd(a).length}function Vb(a,b,c){var d;a=p.createCallback(a,c);var e=-1,f=b?b.length:0;if("number"==typeof f)for(;++e<f&&!(d=a(b[e],e,b)););else Jd(b,function(b,c,e){return!(d=a(b,c,e))});return!!d}function Wb(a,b,c){var d=-1,e=b?b.length:0,g=Pc("number"==typeof e?e:0);for(a=p.createCallback(a,c),Jb(b,function(b,c,e){var f=g[++d]=j();f.criteria=a(b,c,e),f.index=d,f.value=b}),e=g.length,g.sort(f);e--;){var h=g[e];g[e]=h.value,l(h)}return g}function Xb(a){return a&&"number"==typeof a.length?m(a):Cb(a)}function Yb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function Zb(a){var d=-1,e=Z(),f=a?a.length:0,h=dd.apply(Zc,wd.call(arguments,1)),i=[],j=f>=u&&e===b;if(j){var k=g(h);k?(e=c,h=k):j=!1}for(;++d<f;){var m=a[d];e(h,m)<0&&i.push(m)}return j&&l(h),i}function $b(a,b,c){var d=-1,e=a?a.length:0;for(b=p.createCallback(b,c);++d<e;)if(b(a[d],d,a))return d;return-1}function _b(a,b,c){if(a){var d=0,e=a.length;if("number"!=typeof b&&null!=b){var f=-1;for(b=p.createCallback(b,c);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a[0];return m(a,0,td(sd(0,d),e))}}function ac(a,c,d){if("number"==typeof d){var e=a?a.length:0;d=0>d?sd(0,e+d):d||0}else if(d){var f=hc(a,c);return a[f]===c?f:-1}return a?b(a,c,d):-1}function bc(a,b,c){if(!a)return[];var d=0,e=a.length;if("number"!=typeof b&&null!=b){var f=e;for(b=p.createCallback(b,c);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return m(a,0,td(sd(0,e-d),e))}function cc(a){for(var d=arguments,e=d.length,f=-1,h=i(),j=-1,m=Z(),n=a?a.length:0,o=[],p=i();++f<e;){var q=d[f];h[f]=m===b&&(q?q.length:0)>=u&&g(f?d[f]:p)}a:for(;++j<n;){var r=h[0];if(q=a[j],(r?c(r,q):m(p,q))<0){for(f=e,(r||p).push(q);--f;)if(r=h[f],(r?c(r,q):m(d[f],q))<0)continue a;o.push(q)}}for(;e--;)r=h[e],r&&l(r);return k(h),k(p),o}function dc(a,b,c){if(a){var d=0,e=a.length;if("number"!=typeof b&&null!=b){var f=e;for(b=p.createCallback(b,c);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a[e-1];return m(a,sd(0,e-d))}}function ec(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?sd(0,d+c):td(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function fc(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,e=sd(0,bd((b-a)/c)),f=Pc(e);++d<e;)f[d]=a,a+=c;return f}function gc(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=p.createCallback(b,c);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:sd(0,b);return m(a,d)}function hc(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?p.createCallback(c,d,1):Dc,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function ic(a){return Bd(a)||(arguments[0]=a?wd.call(a):Zc),Nd(dd.apply(Zc,arguments))}function jc(a){for(var b=-1,c=a?Nb(Pb(a,"length")):0,d=Pc(0>c?0:c);++b<c;)d[b]=Pb(a,b);return d}function kc(a){return Zb(a,wd.call(arguments,1))}function lc(a){return a?jc(arguments):[]}function mc(a,b){for(var c=-1,d=a?a.length:0,e={};++c<d;){var f=a[c];b?e[f]=b[c]:e[f[0]]=f[1]}return e}function nc(a,b){return 1>a?b():function(){return--a<1?b.apply(this,arguments):void 0}}function oc(a,b){return Ad.fastBind||md&&arguments.length>2?md.call.apply(md,arguments):v(a,b,wd.call(arguments,2))}function pc(a){for(var b=arguments.length>1?dd.apply(Zc,wd.call(arguments,1)):gb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=oc(a[e],a)}return a}function qc(a,b){return v(a,b,wd.call(arguments,2),s)}function rc(){var a=arguments;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function sc(a,b,c){if(null==a)return Dc;var d=typeof a;if("function"!=d){if("object"!=d)return function(b){return b[a]};var e=Dd(a);return function(b){for(var c=e.length,d=!1;c--&&(d=nb(b[e[c]],a[e[c]],s)););return d}}return"undefined"==typeof b||D&&!D.test(fd.call(a))?a:1===c?function(c){return a.call(b,c)}:2===c?function(c,d){return a.call(b,c,d)}:4===c?function(c,d,e,f){return a.call(b,c,d,e,f)}:function(c,d,e){return a.call(b,c,d,e)}}function tc(a,b,c){function d(){cd(m),cd(n),j=0,m=n=null}function e(){var b=o&&(!p||j>1);d(),b&&(l!==!1&&(k=new Rc),h=a.apply(i,g))}function f(){d(),(o||l!==b)&&(k=new Rc,h=a.apply(i,g))}var g,h,i,j=0,k=0,l=!1,m=null,n=null,o=!0;if(b=sd(0,b||0),c===!0){var p=!0;o=!1}else qb(c)&&(p=c.leading,l="maxWait"in c&&sd(b,c.maxWait||0),o="trailing"in c?c.trailing:o);return function(){if(g=arguments,i=this,j++,cd(n),l===!1)p&&2>j&&(h=a.apply(i,g));else{var c=new Rc;m||p||(k=c);var d=l-(c-k);0>=d?(cd(m),m=null,k=c,h=a.apply(i,g)):m||(m=kd(f,d))}return b!==l&&(n=kd(e,b)),h}}function uc(a){var b=wd.call(arguments,1);return kd(function(){a.apply(o,b)},1)}function vc(a,b){var c=wd.call(arguments,2);return kd(function(){a.apply(o,c)},b)}function wc(a,b){function c(){var d=c.cache,e=t+(b?b.apply(this,arguments):arguments[0]);return hd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}return c.cache={},c}function xc(a){var b,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function yc(a){return v(a,wd.call(arguments,1))}function zc(a){return v(a,wd.call(arguments,1),null,s)}function Ac(a,b,c){var d=!0,e=!0;c===!1?d=!1:qb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c=j(),c.leading=d,c.maxWait=b,c.trailing=e;var f=tc(a,b,c);return l(c),f}function Bc(a,b){return function(){var c=[a];return id.apply(c,arguments),b.apply(this,c)}}function Cc(a){return null==a?"":Xc(a).replace(H,X)}function Dc(a){return a}function Ec(a){Jb(gb(a),function(b){var c=p[b]=a[b];p.prototype[b]=function(){var a=this.__wrapped__,b=[a];id.apply(b,arguments);var d=c.apply(p,b);return a&&"object"==typeof a&&a===d?this:new q(d)}})}function Fc(){return d._=_c,this}function Gc(a,b){null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0;var c=vd();return a%1||b%1?a+td(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+ed(c*(b-a+1))}function Hc(a,b){var c=a?a[b]:o;return pb(c)?a[b]():c}function Ic(a,b,c){var d=p.templateSettings;a||(a=""),c=Hd({},c,d);var e,f=Hd({},c.imports,d.imports),g=Dd(f),i=Cb(f),j=0,k=c.interpolate||G,l="__p += '",m=Wc((c.escape||G).source+"|"+k.source+"|"+(k===C?A:G).source+"|"+(c.evaluate||G).source+"|$","g");a.replace(m,function(b,c,d,f,g,i){return d||(d=f),l+=a.slice(j,i).replace(I,h),c&&(l+="' +\n__e("+c+") +\n'"),g&&(e=!0,l+="';\n"+g+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var n=c.variable,q=n;q||(n="obj",l="with ("+n+") {\n"+l+"\n}\n"),l=(e?l.replace(w,""):l).replace(x,"$1").replace(y,"$1;"),l="function("+n+") {\n"+(q?"":n+" || ("+n+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var r="\n/*\n//@ sourceURL="+(c.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var s=Sc(g,"return "+l+r).apply(o,i)}catch(t){throw t.source=l,t}return b?s(b):(s.source=l,s)}function Jc(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=Pc(a);for(b=p.createCallback(b,c,1);++d<a;)e[d]=b(d);return e}function Kc(a){return null==a?"":Xc(a).replace(z,bb)}function Lc(a){var b=++r;return Xc(null==a?"":a)+b}function Mc(a,b){return b(a),a}function Nc(){return Xc(this.__wrapped__)}function Oc(){return this.__wrapped__}d=d?$.defaults(a.Object(),d,$.pick(J,a)):a;var Pc=d.Array,Qc=d.Boolean,Rc=d.Date,Sc=d.Function,Tc=d.Math,Uc=d.Number,Vc=d.Object,Wc=d.RegExp,Xc=d.String,Yc=d.TypeError,Zc=[],$c=Vc.prototype;Xc.prototype;var _c=d._,ad=Wc("^"+Xc($c.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),bd=Tc.ceil,cd=d.clearTimeout,dd=Zc.concat,ed=Tc.floor,fd=Sc.prototype.toString,gd=ad.test(gd=Vc.getPrototypeOf)&&gd,hd=$c.hasOwnProperty,id=Zc.push,jd=($c.propertyIsEnumerable,d.setImmediate),kd=d.setTimeout,ld=$c.toString,md=ad.test(md=ld.bind)&&md,nd=ad.test(nd=Vc.create)&&nd,od=ad.test(od=Pc.isArray)&&od,pd=d.isFinite,qd=d.isNaN,rd=ad.test(rd=Vc.keys)&&rd,sd=Tc.max,td=Tc.min,ud=d.parseInt,vd=Tc.random,wd=Zc.slice,xd=ad.test(d.attachEvent),yd=md&&!/\n|true/.test(md+xd),zd={};zd[M]=Pc,zd[N]=Qc,zd[O]=Rc,zd[P]=Sc,zd[R]=Vc,zd[Q]=Uc,zd[S]=Wc,zd[T]=Xc,q.prototype=p.prototype;var Ad=p.support={};Ad.fastBind=md&&!yd,p.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:C,variable:"",imports:{_:p}};var Bd=od,Cd=function(a){var b,c=a,d=[];if(!c)return d;if(!V[typeof a])return d;for(b in c)hd.call(c,b)&&d.push(b);return d},Dd=rd?function(a){return qb(a)?rd(a):[]}:Cd,Ed={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fd=ib(Ed),Gd=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=p.createCallback(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&V[typeof e])for(var k=-1,l=V[typeof e]&&Dd(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},Hd=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&V[typeof e])for(var j=-1,k=V[typeof e]&&Dd(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},Id=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&&"undefined"==typeof c?b:p.createCallback(b,c);for(d in e)if(b(e[d],d,a)===!1)return f;return f},Jd=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&&"undefined"==typeof c?b:p.createCallback(b,c);for(var g=-1,h=V[typeof e]&&Dd(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},Kd=function(a){if(!a||ld.call(a)!=R)return!1;var b=a.valueOf,c="function"==typeof b&&(c=gd(b))&&gd(c);return c?a==c||gd(a)==c:ab(a)},Ld=Hb,Md=_(function Pd(a,b,c){for(var d=-1,e=a?a.length:0,f=[];++d<e;){var g=a[d];c&&(g=c(g,d,a)),Bd(g)?id.apply(f,b?g:Pd(g)):f.push(g)}return f}),Nd=_(function(a,d,e){var f=-1,h=Z(),j=a?a.length:0,m=[],n=!d&&j>=u&&h===b,o=e||n?i():m;if(n){var p=g(o);p?(h=c,o=p):(n=!1,o=e?o:(k(o),m))}for(;++f<j;){var q=a[f],r=e?e(q,f,a):q;(d?!f||o[o.length-1]!==r:h(o,r)<0)&&((e||n)&&o.push(r),m.push(q))}return n?(k(o.array),l(o)):e&&k(o),m});yd&&Y&&"function"==typeof jd&&(uc=oc(jd,d));var Od=8==ud(E+"08")?ud:function(a,b){return ud(vb(a)?a.replace(F,""):a,b||0)};return p.after=nc,p.assign=Gd,p.at=Db,p.bind=oc,p.bindAll=pc,p.bindKey=qc,p.compact=Yb,p.compose=rc,p.countBy=Fb,p.createCallback=sc,p.debounce=tc,p.defaults=Hd,p.defer=uc,p.delay=vc,p.difference=Zb,p.filter=Hb,p.flatten=Md,p.forEach=Jb,p.forIn=Id,p.forOwn=Jd,p.functions=gb,p.groupBy=Kb,p.initial=bc,p.intersection=cc,p.invert=ib,p.invoke=Lb,p.keys=Dd,p.map=Mb,p.max=Nb,p.memoize=wc,p.merge=xb,p.min=Ob,p.omit=yb,p.once=xc,p.pairs=zb,p.partial=yc,p.partialRight=zc,p.pick=Ab,p.pluck=Pb,p.range=fc,p.reject=Sb,p.rest=gc,p.shuffle=Tb,p.sortBy=Wb,p.tap=Mc,p.throttle=Ac,p.times=Jc,p.toArray=Xb,p.transform=Bb,p.union=ic,p.uniq=Nd,p.unzip=jc,p.values=Cb,p.where=Ld,p.without=kc,p.wrap=Bc,p.zip=lc,p.zipObject=mc,p.collect=Mb,p.drop=gc,p.each=Jb,p.extend=Gd,p.methods=gb,p.object=mc,p.select=Hb,p.tail=gc,p.unique=Nd,Ec(p),p.chain=p,p.prototype.chain=function(){return this},p.clone=db,p.cloneDeep=eb,p.contains=Eb,p.escape=Cc,p.every=Gb,p.find=Ib,p.findIndex=$b,p.findKey=fb,p.has=hb,p.identity=Dc,p.indexOf=ac,p.isArguments=cb,p.isArray=Bd,p.isBoolean=jb,p.isDate=kb,p.isElement=lb,p.isEmpty=mb,p.isEqual=nb,p.isFinite=ob,p.isFunction=pb,p.isNaN=rb,p.isNull=sb,p.isNumber=tb,p.isObject=qb,p.isPlainObject=Kd,p.isRegExp=ub,p.isString=vb,p.isUndefined=wb,p.lastIndexOf=ec,p.mixin=Ec,p.noConflict=Fc,p.parseInt=Od,p.random=Gc,p.reduce=Qb,p.reduceRight=Rb,p.result=Hc,p.runInContext=n,p.size=Ub,p.some=Vb,p.sortedIndex=hc,p.template=Ic,p.unescape=Kc,p.uniqueId=Lc,p.all=Gb,p.any=Vb,p.detect=Ib,p.findWhere=Ib,p.foldl=Qb,p.foldr=Rb,p.include=Eb,p.inject=Qb,Jd(p,function(a,b){p.prototype[b]||(p.prototype[b]=function(){var b=[this.__wrapped__];return id.apply(b,arguments),a.apply(p,b)})}),p.first=_b,p.last=dc,p.take=_b,p.head=_b,Jd(p,function(a,b){p.prototype[b]||(p.prototype[b]=function(b,c){var d=a(this.__wrapped__,b,c);return null==b||c&&"function"!=typeof b?d:new q(d)})}),p.VERSION="1.3.1",p.prototype.toString=Nc,p.prototype.value=Oc,p.prototype.valueOf=Oc,Jb(["join","pop","shift"],function(a){var b=Zc[a];p.prototype[a]=function(){return b.apply(this.__wrapped__,arguments)}}),Jb(["push","reverse","sort","unshift"],function(a){var b=Zc[a];p.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Jb(["concat","slice","splice"],function(a){var b=Zc[a];p.prototype[a]=function(){return new q(b.apply(this.__wrapped__,arguments))}}),p}var o,p=[],q=[],r=0,s={},t=+new Date+"",u=75,v=40,w=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,A=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,B=/\w*$/,C=/<%=([\s\S]+?)%>/g,D=(D=/\bthis\b/)&&D.test(n)&&D,E=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",F=RegExp("^["+E+"]*0+(?=.$)"),G=/($^)/,H=/[&<>"']/g,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],K=0,L="[object Arguments]",M="[object Array]",N="[object Boolean]",O="[object Date]",P="[object Function]",Q="[object Number]",R="[object Object]",S="[object RegExp]",T="[object String]",U={};U[P]=!1,U[L]=U[M]=U[N]=U[O]=U[Q]=U[R]=U[S]=U[T]=!0;var V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},W={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=V[typeof exports]&&exports,Y=V[typeof module]&&module&&module.exports==X&&module,Z=V[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(a=Z);var $=n();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a._=$,define(function(){return $})):X&&!X.nodeType?Y?(Y.exports=$)._=$:X._=$:a._=$}(this),function(a){function b(a){for(var b in a)m[b]=a[b]}var c;if("object"==typeof module&&module.exports)c=require("./stdlib-dashlo");else var c=a._;var d=[];d.push;var e=d.slice;d.splice;var f=c,g={on:function(a,b,c){if(!i(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!i(this,"once",a,[b,c])||!b)return this;var d=this,e=f.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,g,h,j,k,l,m;if(!this._events||!i(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:f.keys(this._events),j=0,k=h.length;k>j;j++)if(a=h[j],g=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=g.length;m>l;l++)e=g[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!i(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&j(c,b),d&&j(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},h=/\s+/,i=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(h.test(c)){for(var f=c.split(h),g=0,i=f.length;i>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},j=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},k={listenTo:"on",listenToOnce:"once"};f.each(k,function(a,b){g[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),g=b._listenerId||(b._listenerId=f.uniqueId("l"));return e[g]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),g.bind=g.on,g.unbind=g.off;var l={boolNary:function(a,b){for(var c=b.length,d=!0,e=1;c>e&&(d=a(b[e-1],b[e]),d);++e);return d},nary:function(a,b){for(var c=b.length,d=b[0],e=1;c>e;++e)d=a(d,b[e]);return d},blt:function(a,b){return b>a},bgt:function(a,b){return a>b},beq:function(a,b){return a=b},blte:function(a,b){return b>=a},bgte:function(a,b){return a>=b},bplus:function(a,b){return a+b},bminus:function(a,b){return a-b},bmult:function(a,b){return a*b},bdivide:function(a,b){return a/b},lt:function(){return boolNary(blt,arguments)},gt:function(){return boolNary(bgt,arguments)},eq:function(){return boolNary(beq,arguments)},lte:function(){return boolNary(blte,arguments)},gte:function(){return boolNary(bgte,arguments)},plus:function(){return nary(bplus,arguments)},minus:function(){return nary(bminus,arguments)},mult:function(){return nary(bmult,arguments)},divide:function(){return nary(bdivide,arguments)},not:function(a){return!a},uminus:function(a){return-a},udivide:function(a){return 1/a},log:function(){console.log.apply(console,arguments)},foreach:function(a,b){a.forEach(b)},get:function(a,b){return a[b]},isinstance:function(a,b){return a instanceof b},msdispatch:{oid:0,emitter:f.extend({},g),__stringForEvent:function(a,b){if(!a||!a.__msdoid)return null;var c="change:"+a.__msdoid;return null!=b&&(c+=":"+b),c},on:function(a,b,c,d){a.__msdoid||(a.__msdoid=this.oid+=1),this.emitter.on(this.__stringForEvent(a,b),c,d)},off:function(a,b,c,d){"function"==typeof b&&(d=c,c=b,b=null),this.emitter.off(this.__stringForEvent(a,b),c,d)},eventStream:function(a,b,c){return a.__msdoid||(a.__msdoid=this.oid+=1),Bacon.fromEventTarget(this.emitter,this.__stringForEvent(a,b),c)},propChange:function(a,b,c,d){c!==d&&(this.emitter.trigger(this.__stringForEvent(a,b),a,c,d),this.emitter.trigger(this.__stringForEvent(a),a,c,d,b))}},assoc:function(){},lastIndex:function(a){return a.length-1}};l.ult=l.ugt=l.ulte=l.ugte=function(){return!0},l.uplus=l.umult=l.identity=function(a){return a};var m;m="object"==typeof global?global:window,b(l),b(c)}.call(this,this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb=[].slice,cb={}.hasOwnProperty,db=function(a,b){function c(){this.constructor=a}for(var d in b)cb.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},eb=function(a,b){return function(){return a.apply(b,arguments)}};a={},a.fromBinder=function(b,c){return null==c&&(c=Z.id),new h(function(d){var e;return e=b(function(){var b,f,h,i,j,k;for(b=1<=arguments.length?bb.call(arguments,0):[],i=c.apply(null,b),i instanceof Array&&Z.last(i)instanceof g||(i=[i]),h=a.more,j=0,k=i.length;k>j;j++)if(f=i[j],h=d(f=T(f)),h===a.noMore||f.isEnd())return null!=e?e():a.scheduler.setTimeout(function(){return e()},0),h;return h})})},a.$={asEventStream:function(b,c,d){var e,f=this;return H(c)&&(e=[c,null],d=e[0],c=e[1]),a.fromBinder(function(a){return f.on(b,c,a),function(){return f.off(b,c,a)}},d)}},null!=($="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:null)&&($.fn.asEventStream=a.$.asEventStream),a.fromEventTarget=function(b,c,d){var e,f,g,h,i,j;return e=null!=(g=b.addEventListener)?g:null!=(h=b.addListener)?h:b.bind,f=null!=(i=b.removeEventListener)?i:null!=(j=b.removeListener)?j:b.unbind,a.fromBinder(function(a){return e.call(b,c,a),function(){return f.call(b,c,a)}},d)},a.fromPromise=function(b,c){return a.fromBinder(function(a){return b.then(a,function(b){return a(new f(b))}),function(){return c?"function"==typeof b.abort?b.abort():void 0:void 0}},function(a){return[a,C()]})},a.noMore=["<no-more>"],a.more=["<more>"],a.later=function(b,c){return a.sequentially(b,[c])},a.sequentially=function(b,c){var d;return d=0,a.fromPoll(b,function(){var a;return a=c[d++],d<c.length?a:d===c.length?[a,C()]:C()})},a.repeatedly=function(b,c){var d;return d=0,a.fromPoll(b,function(){return c[d++%c.length]})},Y=function(a){return function(){var b,c,d,e;return d=arguments[0],b=2<=arguments.length?bb.call(arguments,1):[],"object"==typeof d&&b.length&&(c=d,e=b[0],d=function(){return c[e].apply(c,arguments)},b=b.slice(1)),a.apply(null,[d].concat(bb.call(b)))}},J=function(b){return Y(function(){var c,d,e;return d=arguments[0],c=2<=arguments.length?bb.call(arguments,1):[],e=Q(b,[function(a,b){return d.apply(null,bb.call(a).concat([b]))}]),a.combineAsArray(c).flatMap(e)})},a.fromCallback=J(function(){var b,c;return c=arguments[0],b=2<=arguments.length?bb.call(arguments,1):[],a.fromBinder(function(a){return K(c,b)(a),P},function(a){return[a,C()]})}),a.fromNodeCallback=J(function(){var b,c;return c=arguments[0],b=2<=arguments.length?bb.call(arguments,1):[],a.fromBinder(function(a){return K(c,b)(a),P},function(a,b){return a?[new f(a),C()]:[b,C()]})}),a.fromPoll=function(b,c){return a.fromBinder(function(c){var d;return d=a.scheduler.setInterval(c,b),function(){return a.scheduler.clearInterval(d)}},c)},a.interval=function(b,c){return null==c&&(c={}),a.fromPoll(b,function(){return O(c)})},a.constant=function(a){return new m(R([a],F),!0)},a.never=function(){return a.fromArray([])},a.once=function(b){return a.fromArray([b])},a.fromArray=function(a){return t(a),new h(R(a,T))},R=function(a,b){return function(c){var d,e,f;for(e=0,f=a.length;f>e;e++)d=a[e],c(b(d));return c(C()),P}},a.mergeAll=function(){var b;return b=1<=arguments.length?bb.call(arguments,0):[],b[0]instanceof Array&&(b=b[0]),Z.fold(b,a.never(),function(a,b){return a.merge(b)})},a.zipAsArray=function(){var b;return b=1<=arguments.length?bb.call(arguments,0):[],b[0]instanceof Array&&(b=b[0]),a.zipWith(b,function(){var a;return a=1<=arguments.length?bb.call(arguments,0):[]})},a.zipWith=function(){var b,c,d;return b=arguments[0],c=2<=arguments.length?bb.call(arguments,1):[],H(b)||(d=[b,c[0]],c=d[0],b=d[1]),a.when(c,b)},a.combineAsArray=function(){var b,c,d,e,f,g,h;for(f=1<=arguments.length?bb.call(arguments,0):[],1===f.length&&f[0]instanceof Array&&(f=f[0]),b=g=0,h=f.length;h>g;b=++g)e=f[b],e instanceof l||(f[b]=a.constant(e));return f.length?(d=function(){var a,b,d;for(d=[],a=0,b=f.length;b>a;a++)c=f[a],d.push(new q(c,!0,!1,c.subscribeInternal));return d}(),a.when(d,function(){var a;
return a=1<=arguments.length?bb.call(arguments,0):[]}).toProperty()):a.constant([])},a.onValues=function(){var b,c,d;return c=2<=arguments.length?bb.call(arguments,0,d=arguments.length-1):(d=0,[]),b=arguments[d++],a.combineAsArray(c).onValues(b)},a.combineWith=function(){var b,c;return b=arguments[0],c=2<=arguments.length?bb.call(arguments,1):[],a.combineAsArray(c).map(function(a){return b.apply(null,a)})},a.combineTemplate=function(b){var c,d,e,f,g,h,i,j,k,m;return i=[],m=[],h=function(a){return a[a.length-1]},k=function(a,b,c){return h(a)[b]=c},c=function(a,b){return function(c,d){return k(c,a,d[b])}},g=function(a,b){return function(c){return k(c,a,b)}},j=function(a){return a instanceof Array?[]:{}},e=function(a,b){var d,e;return b instanceof l?(m.push(b),i.push(c(a,m.length-1))):b===Object(b)&&"function"!=typeof b?(e=function(a){return function(c){var d;return d=j(b),k(c,a,d),c.push(d)}},d=function(a){return a.pop()},i.push(e(a)),f(b),i.push(d)):i.push(g(a,b))},f=function(a){return Z.each(a,e)},f(b),d=function(a){var c,d,e,f,g;for(e=j(b),c=[e],f=0,g=i.length;g>f;f++)d=i[f],d(c,a);return e},a.combineAsArray(m).map(d)},g=function(){function a(){}return a.prototype.isEvent=function(){return!0},a.prototype.isEnd=function(){return!1},a.prototype.isInitial=function(){return!1},a.prototype.isNext=function(){return!1},a.prototype.isError=function(){return!1},a.prototype.hasValue=function(){return!1},a.prototype.filter=function(){return!0},a}(),j=function(a){function b(a){this.value=H(a)?Z.cached(a):Z.always(a)}return db(b,a),b.prototype.isNext=function(){return!0},b.prototype.hasValue=function(){return!0},b.prototype.fmap=function(a){var b=this;return this.apply(function(){return a(b.value())})},b.prototype.apply=function(a){return new b(a)},b.prototype.filter=function(a){return a(this.value())},b.prototype.describe=function(){return this.value()},b}(g),i=function(a){function b(){return _=b.__super__.constructor.apply(this,arguments)}return db(b,a),b.prototype.isInitial=function(){return!0},b.prototype.isNext=function(){return!1},b.prototype.apply=function(a){return new b(a)},b.prototype.toNext=function(){return new j(this.value)},b}(j),e=function(a){function b(){return ab=b.__super__.constructor.apply(this,arguments)}return db(b,a),b.prototype.isEnd=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.describe=function(){return"<end>"},b}(g),f=function(a){function b(a){this.error=a}return db(b,a),b.prototype.isError=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.describe=function(){return"<error> "+this.error},b}(g),l=function(){function b(){this.combine=eb(this.combine,this),this.flatMapLatest=eb(this.flatMapLatest,this),this.fold=eb(this.fold,this),this.scan=eb(this.scan,this),this.assign=this.onValue}return b.prototype.onValue=function(){var a;return a=L(arguments),this.subscribe(function(b){return b.hasValue()?a(b.value()):void 0})},b.prototype.onValues=function(a){return this.onValue(function(b){return a.apply(null,b)})},b.prototype.onError=function(){var a;return a=L(arguments),this.subscribe(function(b){return b.isError()?a(b.error):void 0})},b.prototype.onEnd=function(){var a;return a=L(arguments),this.subscribe(function(b){return b.isEnd()?a():void 0})},b.prototype.errors=function(){return this.filter(function(){return!1})},b.prototype.filter=function(){var b,c;return c=arguments[0],b=2<=arguments.length?bb.call(arguments,1):[],B(this,c,b,function(b){return this.withHandler(function(c){return c.filter(b)?this.push(c):a.more})})},b.prototype.takeWhile=function(){var b,c;return c=arguments[0],b=2<=arguments.length?bb.call(arguments,1):[],B(this,c,b,function(b){return this.withHandler(function(c){return c.filter(b)?this.push(c):(this.push(C()),a.noMore)})})},b.prototype.endOnError=function(){var a,b;return b=arguments[0],a=2<=arguments.length?bb.call(arguments,1):[],null==b&&(b=!0),B(this,b,a,function(a){return this.withHandler(function(b){return b.isError()&&a(b.error)?(this.push(b),this.push(C())):this.push(b)})})},b.prototype.take=function(b){return 0>=b?a.never():this.withHandler(function(c){return c.hasValue()?(b--,b>0?this.push(c):(0===b&&this.push(c),this.push(C()),a.noMore)):this.push(c)})},b.prototype.map=function(){var a,b;return b=arguments[0],a=2<=arguments.length?bb.call(arguments,1):[],b instanceof m?b.sampledBy(this,D):B(this,b,a,function(a){return this.withHandler(function(b){return this.push(b.fmap(a))})})},b.prototype.mapError=function(){var a;return a=L(arguments),this.withHandler(function(b){return b.isError()?this.push(O(a(b.error))):this.push(b)})},b.prototype.mapEnd=function(){var b;return b=L(arguments),this.withHandler(function(c){return c.isEnd()?(this.push(O(b(c))),this.push(C()),a.noMore):this.push(c)})},b.prototype.doAction=function(){var a;return a=L(arguments),this.withHandler(function(b){return b.hasValue()&&a(b.value()),this.push(b)})},b.prototype.skip=function(b){return this.withHandler(function(c){return c.hasValue()?b>0?(b--,a.more):this.push(c):this.push(c)})},b.prototype.skipDuplicates=function(a){return null==a&&(a=function(a,b){return a===b}),this.withStateMachine(k,function(b,c){return c.hasValue()?c.isInitial()||b===k||!a(b.get(),c.value())?[new p(c.value()),[c]]:[b,[]]:[b,[c]]})},b.prototype.skipErrors=function(){return this.withHandler(function(b){return b.isError()?a.more:this.push(b)})},b.prototype.withStateMachine=function(b,c){var d;return d=b,this.withHandler(function(b){var e,f,g,h,i,j,k;for(e=c(d,b),f=e[0],h=e[1],d=f,i=a.more,j=0,k=h.length;k>j;j++)if(g=h[j],i=this.push(g),i===a.noMore)return i;return i})},b.prototype.scan=function(b,c,d){var e,f,g,h=this;return f=S(c),c=d?f:function(a,b){return f(a(),b())},e=W(b).map(function(a){return Z.always(a)}),g=function(b){var d,f,g,j;return d=!1,j=P,f=a.more,g=function(){return d?void 0:(d=!0,e.forEach(function(c){return f=b(new i(c)),f===a.noMore?(j(),j=P):void 0}))},j=h.subscribe(function(h){var i,j;return h.hasValue()?d&&h.isInitial()?a.more:(h.isInitial()||g(),d=!0,j=e.getOrElse(function(){return void 0}),i=Z.cached(function(){return c(j,h.value)}),e=new p(i),b(h.apply(i))):(h.isEnd()&&(f=g()),f!==a.noMore?b(h):void 0)}),g(),j},new m(g)},b.prototype.fold=function(a,b){return this.scan(a,b).sampledBy(this.filter(!1).mapEnd().toProperty())},b.prototype.zip=function(b,c){return null==c&&(c=Array),a.zipWith([this,b],c)},b.prototype.diff=function(a,b){return b=S(b),this.scan([a],function(a,c){return[c,b(a[0],c)]}).filter(function(a){return 2===a.length}).map(function(a){return a[1]})},b.prototype.flatMap=function(d,e){var f;return d=N(d),f=this,new h(function(g){var h,j;return j=new c,h=function(a){return a(),j.empty()?g(C()):void 0},j.add(function(c,k){return f.subscribe(function(c){var f;return c.isEnd()?h(k):c.isError()?g(c):e&&j.count()>1?a.more:j.unsubscribed?a.noMore:(f=d(c.value()),f instanceof b||(f=a.once(f)),j.add(function(b,c){return f.subscribe(function(d){var e;return d.isEnd()?(h(c),a.noMore):(d instanceof i&&(d=d.toNext()),e=g(d),e===a.noMore&&b(),e)})}))})}),j.unsubscribe})},b.prototype.flatMapFirst=function(a){return this.flatMap(a,!0)},b.prototype.flatMapLatest=function(a){var b;return a=N(a),b=this.toEventStream(),b.flatMap(function(c){return a(c).takeUntil(b)})},b.prototype.not=function(){return this.map(function(a){return!a})},b.prototype.log=function(){var a;return a=1<=arguments.length?bb.call(arguments,0):[],this.subscribe(function(b){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log.apply(console,bb.call(a).concat([b.describe()])):void 0:void 0}),this},b.prototype.slidingWindow=function(a,b){return null==b&&(b=0),this.scan([],function(b,c){return b.concat([c]).slice(-a)}).filter(function(a){return a.length>=b})},b.prototype.combine=function(b,c){var d;return d=S(c),a.combineAsArray(this,b).map(function(a){return d(a[0],a[1])})},b.prototype.decode=function(b){return this.combine(a.combineTemplate(b),function(a,b){return b[a]})},b.prototype.awaiting=function(a){return this.toEventStream().map(!0).merge(a.toEventStream().map(!1)).toProperty(!1)},b}(),l.prototype.reduce=l.prototype.fold,h=function(b){function c(a){this.takeUntil=eb(this.takeUntil,this),this.sampledBy=eb(this.sampledBy,this);var b;c.__super__.constructor.call(this),w(a),b=new d(a),this.subscribe=b.subscribe,this.subscribeInternal=this.subscribe,this.hasSubscribers=b.hasSubscribers}return db(c,b),c.prototype.delay=function(b){return this.flatMap(function(c){return a.later(b,c)})},c.prototype.debounce=function(b){return this.flatMapLatest(function(c){return a.later(b,c)})},c.prototype.debounceImmediate=function(b){return this.flatMapFirst(function(c){return a.once(c).concat(a.later(b).filter(!1))})},c.prototype.throttle=function(a){return this.bufferWithTime(a).map(function(a){return a[a.length-1]})},c.prototype.bufferWithTime=function(a){return this.bufferWithTimeOrCount(a,Number.MAX_VALUE)},c.prototype.bufferWithCount=function(a){return this.bufferWithTimeOrCount(void 0,a)},c.prototype.bufferWithTimeOrCount=function(a,b){var c;return c=function(c){return c.values.length===b?c.flush():void 0!==a?c.schedule():void 0},this.buffer(a,c,c)},c.prototype.buffer=function(b,c,d){var e,f,g;return null==c&&(c=function(){}),null==d&&(d=function(){}),e={scheduled:!1,end:null,values:[],flush:function(){var b;if(this.scheduled=!1,this.values.length>0){if(b=this.push(O(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(b!==a.noMore)return d(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var a=this;return this.scheduled?void 0:(this.scheduled=!0,b(function(){return a.flush()}))}},g=a.more,H(b)||(f=b,b=function(b){return a.scheduler.setTimeout(b,f)}),this.withHandler(function(a){return e.push=this.push,a.isError()?g=this.push(a):a.isEnd()?(e.end=a,e.scheduled||e.flush()):(e.values.push(a.value()),c(e)),g})},c.prototype.merge=function(b){var d;return v(b),d=this,new c(function(c){var e,f;return e=0,f=function(b){return function(d){return b.subscribe(function(b){var f;return b.isEnd()?(e++,2===e?c(C()):a.more):(f=c(b),f===a.noMore&&d(),f)})}},A(f(d),f(b))})},c.prototype.toProperty=function(a){return 0===arguments.length&&(a=k),this.scan(a,I,!0)},c.prototype.toEventStream=function(){return this},c.prototype.sampledBy=function(a,b){return this.toProperty().sampledBy(a,b)},c.prototype.concat=function(a){var b;return b=this,new c(function(c){var d;return d=b.subscribe(function(b){return b.isEnd()?d=a.subscribe(c):c(b)}),function(){return d()}})},c.prototype.takeUntil=function(b){var d;return d=this,new c(function(c){var e,f;return f=function(d){return b.onValue(function(){return c(C()),d(),a.noMore})},e=function(b){return d.subscribe(function(d){var e;return e=c(d),(d.isEnd()||e===a.noMore)&&b(),e})},A(f,e)})},c.prototype.skipUntil=function(a){var b;return b=a.take(1).map(!0).toProperty(!1),this.filter(b)},c.prototype.skipWhile=function(){var b,c,d;return c=arguments[0],b=2<=arguments.length?bb.call(arguments,1):[],d=!1,B(this,c,b,function(b){return this.withHandler(function(c){return!d&&c.hasValue()&&b(c.value())?a.more:(c.hasValue()&&(d=!0),this.push(c))})})},c.prototype.startWith=function(b){return a.once(b).concat(this)},c.prototype.withHandler=function(a){var b;return b=new d(this.subscribe,a),new c(b.subscribe)},c.prototype.withSubscribe=function(a){return new c(a)},c}(l),m=function(b){function c(b,d){this.toEventStream=eb(this.toEventStream,this),this.toProperty=eb(this.toProperty,this),this.changes=eb(this.changes,this),this.sample=eb(this.sample,this);var e=this;c.__super__.constructor.call(this),this.subscribeInternal=d===!0?b:new n(b,d).subscribe,this.sampledBy=function(b,d){var f,g,h,i;return null!=d?d=S(d):(f=!0,d=function(a){return a()}),i=new q(e,!1,!1,e.subscribeInternal,f),g=new q(b,!0,!1,b.subscribe,f),h=a.when([i,g],d),b instanceof c?h.toProperty():h},this.subscribe=function(b){var c,d,f,g,h;return f=a.more,c=function(){function c(){}return c.prototype.set=function(a){return this.event=a},c.prototype.send=function(){var c;return c=this.event,this.event=null,null!=c&&f!==a.noMore&&(f=b(c),f===a.noMore)?g():void 0},c}(),h=new c,d=new c,g=P,g=e.subscribeInternal(function(c){return c.isError()?f!==a.noMore&&(f=b(c)):(c.hasValue()?h.set(c):c.isEnd()&&d.set(c),o.onDone(function(){return h.send(),d.send()})),f}),function(){return f=a.noMore,g()}}}return db(c,b),c.prototype.sample=function(b){return this.sampledBy(a.interval(b,{}))},c.prototype.changes=function(){var a=this;return new h(function(b){return a.subscribe(function(a){return a.isInitial()?void 0:b(a)})})},c.prototype.withHandler=function(a){return new c(this.subscribeInternal,a)},c.prototype.withSubscribe=function(a){return new c(a)},c.prototype.toProperty=function(){return x(arguments),this},c.prototype.toEventStream=function(){var a=this;return new h(function(b){return a.subscribe(function(a){return a.isInitial()&&(a=a.toNext()),b(a)})})},c.prototype.and=function(a){return this.combine(a,function(a,b){return a&&b})},c.prototype.or=function(a){return this.combine(a,function(a,b){return a||b})},c.prototype.delay=function(a){return this.delayChanges(function(b){return b.delay(a)})},c.prototype.debounce=function(a){return this.delayChanges(function(b){return b.debounce(a)})},c.prototype.throttle=function(a){return this.delayChanges(function(b){return b.throttle(a)})},c.prototype.delayChanges=function(a){return r(this,a(this.changes()))},c.prototype.takeUntil=function(a){var b;return b=this.changes().takeUntil(a),r(this,b)},c.prototype.startWith=function(a){return this.scan(a,function(a,b){return b})},c}(l),B=function(a,b,c,d){var e;return b instanceof m?(e=b.sampledBy(a,function(a,b){return[a,b]}),d.apply(e,[function(a){var b,c;return b=a[0],c=a[1],b}]).map(function(a){var b,c;return b=a[0],c=a[1]})):(b=K(b,c),d.apply(a,[b]))},r=function(b,c){var d;return d=function(b){var c;return c=k,b.subscribe(function(b){return b.hasValue()&&(c=new p(b.value())),a.noMore}),c},c.toProperty(d(b))},d=function(){function b(b,c){var d,e,f,g,h,i,j,k,l,m=this;null==b&&(b=function(){return P}),j=[],h=null,g=!1,e=!1,this.hasSubscribers=function(){return j.length>0},f=null,k=P,i=function(a){return j=Z.without(a,j)},l=null,d=function(){var a,b,c,d,e;if(null!=l){for(b=l,l=null,e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a());return e}},this.push=function(b){var c,e,k,l,n,o;if(g)return h=(h||[]).concat([b]),a.more;if(b!==f){b.isError()&&(f=b),k=!1;try{for(g=!0,l=j,n=0,o=l.length;o>n;n++)e=l[n],c=e.sink(b),(c===a.noMore||b.isEnd())&&i(e);k=!0}finally{g=!1,k||(h=null)}for(k=!0;null!=h?h.length:void 0;)b=Z.head(h),h=Z.tail(h),m.push(b);return d(b),m.hasSubscribers()?a.more:a.noMore}},null==c&&(c=function(a){return this.push(a)}),this.handleEvent=function(a){return a.isEnd()&&(e=!0),c.apply(m,[a])},this.subscribe=function(a){var c;return e?(a(C()),P):(w(a),c={sink:a},j=j.concat(c),1===j.length&&(k=b(m.handleEvent)),w(k),function(){return i(c),m.hasSubscribers()?void 0:k()})}}return b}(),n=function(b){function c(b,d){var e,f,g,h=this;c.__super__.constructor.call(this,b,d),e=k,g=this.push,b=this.subscribe,f=!1,this.push=function(a){return a.isEnd()&&(f=!0),a.hasValue()&&(e=new p(a.value)),o.inTransaction(function(){return g.apply(h,[a])})},this.subscribe=function(c){var d,g,i;return d=!1,i=function(){return h.hasSubscribers()||f},g=e.filter(i).map(function(a){return c(F(a()))}),g.getOrElse(a.more)===a.noMore?P:f?(c(C()),P):b.apply(h,[c])}}return db(c,b),c}(d),o=function(){var a,b,c,d;return d=[],c=!1,b=function(a){return c?d.push(a):a()},a=function(a){var b,e,f,g,h;if(c)return a();c=!0;try{f=a()}finally{c=!1}for(e=d,d=[],g=0,h=e.length;h>g;g++)b=e[g],b();return f},{onDone:b,inTransaction:a}}(),b=function(b){function c(){var b,d,e,g,h,i,j,k;e=void 0,i=[],b=!1,d=function(b){return function(c){return c.isEnd()?(k(b),a.noMore):e(c)}},j=function(){var a,b,c,d;for(d=[],b=0,c=i.length;c>b;b++)a=i[b],d.push("function"==typeof a.unsub?a.unsub():void 0);return d},h=function(a){return a.unsub=a.input.subscribe(d(a.input))},k=function(a){var b,c,d,e;for(b=d=0,e=i.length;e>d;b=++d)if(c=i[b],c.input===a)return"function"==typeof c.unsub&&c.unsub(),i.splice(b,1),void 0},g=function(a){var b,c,d,f;for(e=a,f=z(i),c=0,d=f.length;d>c;c++)b=f[c],h(b);return j},c.__super__.constructor.call(this,g),this.plug=function(a){var c;if(!b)return c={input:a},i.push(c),null!=e&&h(c),function(){return k(a)}},this.push=function(a){return"function"==typeof e?e(O(a)):void 0},this.error=function(a){return"function"==typeof e?e(new f(a)):void 0},this.end=function(){return b=!0,j(),"function"==typeof e?e(C()):void 0}}return db(c,b),c}(h),q=function(){function a(a,b,c,d,e){var f,g;this.sync=b,this.subscribe=d,null==e&&(e=!1),g=[],f=e?Z.id:function(a){return a()},null==this.subscribe&&(this.subscribe=a.subscribe),this.markEnded=function(){return this.ended=!0},c?(this.consume=function(){return f(g.shift())},this.push=function(a){return g.push(a)},this.mayHave=function(a){return!this.ended||g.length>=a},this.hasAtLeast=function(a){return g.length>=a}):(this.consume=function(){return f(g[0])},this.push=function(a){return g=[a]},this.mayHave=function(){return!0},this.hasAtLeast=function(){return g.length})}return a}(),q.fromObservable=function(a){return a instanceof q?a:a instanceof m?new q(a,!1,!1):new q(a,!0,!0)},a.when=function(){var b,c,d,e,f,g,i,j,k,m,n,o,p,r,t,u,v;if(k=1<=arguments.length?bb.call(arguments,0):[],0===k.length)return a.never();for(f=k.length,o="when: expecting arguments in the form (Observable+,function)+",s(o,0===f%2),n=[],j=[],c=0;f>c;){for(i=Z.toArray(k[c]),b=k[c+1],g={f:H(b)?b:function(){return b},ixs:[]},p=0,t=i.length;t>p;p++){for(m=i[p],s(m instanceof l,o),d=n.indexOf(m),0>d&&(n.push(m),d=n.length-1),v=g.ixs,r=0,u=v.length;u>r;r++)e=v[r],e.index===d&&e.count++;g.ixs.push({index:d,count:1})}i.length>0&&j.push(g),c+=2}return n.length?(n=Z.map(q.fromObservable,n),new h(function(b){var d,e,f,g;return f=function(a){return Z.all(a.ixs,function(a){return n[a.index].hasAtLeast(a.count)})},e=function(a){return!a.sync||a.ended},d=function(a){return Z.any(a.ixs,function(a){return!n[a.index].mayHave(a.count)})},g=function(g){return function(h){return g.subscribe(function(i){var k,l,m,o,p;if(i.isEnd())g.markEnded(),(Z.all(n,e)||Z.all(j,d))&&(l=a.noMore,b(C()));else if(i.isError())l=b(i);else if(g.push(i.value),g.sync)for(o=0,p=j.length;p>o;o++)if(k=j[o],f(k)){m=function(){return k.f.apply(k,function(){var a,b,d,e;for(d=k.ixs,e=[],a=0,b=d.length;b>a;a++)c=d[a],e.push(n[c.index].consume());return e}())},l=b(i.apply(m));break}return l===a.noMore&&h(),l||a.more})}},A.apply(null,function(){var a,b,d;for(d=[],c=a=0,b=n.length;b>a;c=++a)m=n[c],d.push(g(m,c));return d}())})):a.never()},a.update=function(){var b,c,d,e;for(c=arguments[0],e=2<=arguments.length?bb.call(arguments,1):[],d=function(a){return function(){var b;return b=1<=arguments.length?bb.call(arguments,0):[],function(c){return a.apply(null,[c].concat(b))}}},b=e.length-1;b>0;)e[b]instanceof Function||(e[b]=function(a){return function(){return a}}(e[b])),e[b]=d(e[b]),b-=2;return a.when.apply(a,e).scan(c,function(a,b){return b(a)})},A=function(){var a;return a=1<=arguments.length?bb.call(arguments,0):[],new c(a).unsubscribe},c=function(){function a(a){var b,c,d;for(null==a&&(a=[]),this.empty=eb(this.empty,this),this.count=eb(this.count,this),this.unsubscribe=eb(this.unsubscribe,this),this.add=eb(this.add,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],c=0,d=a.length;d>c;c++)b=a[c],this.add(b)}return a.prototype.add=function(a){var b,c,d,e=this;if(!this.unsubscribed)return b=!1,c=P,this.starting.push(a),d=function(){return e.unsubscribed?void 0:(c(),b=!0,e.remove(c),Z.remove(a,e.starting))},c=a(this.unsubscribe,d),this.unsubscribed||b||this.subscriptions.push(c),Z.remove(a,this.starting),c},a.prototype.remove=function(a){return this.unsubscribed?void 0:Z.remove(a,this.subscriptions)},a.prototype.unsubscribe=function(){var a,b,c,d;if(!this.unsubscribed){for(this.unsubscribed=!0,d=this.subscriptions,b=0,c=d.length;c>b;b++)a=d[b],a();return this.subscriptions=[],this.starting=[]}},a.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},a.prototype.empty=function(){return 0===this.count()},a}(),p=function(){function a(a){this.value=a}return a.prototype.getOrElse=function(){return this.value},a.prototype.get=function(){return this.value},a.prototype.filter=function(b){return b(this.value)?new a(this.value):k},a.prototype.map=function(b){return new a(b(this.value))},a.prototype.forEach=function(a){return a(this.value)},a.prototype.isDefined=!0,a.prototype.toArray=function(){return[this.value]},a}(),k={getOrElse:function(a){return a},filter:function(){return k},map:function(){return k},forEach:function(){},isDefined:!1,toArray:function(){return[]}},a.EventStream=h,a.Property=m,a.Observable=l,a.Bus=b,a.Initial=i,a.Next=j,a.End=e,a.Error=f,P=function(){},I=function(a,b){return b()},D=function(a){return a},F=function(a){return new i(Z.always(a))},O=function(a){return new j(Z.always(a))},C=function(){return new e},T=function(a){return a instanceof g?a:O(a)},z=function(a){return a.slice(0)},E=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b===d)return c;return-1},s=function(a,b){if(!b)throw a},u=function(a){return s("not an event : "+a,a instanceof g&&a.isEvent())},v=function(a){return s("not an EventStream : "+a,a instanceof h)},w=function(a){return s("not a function : "+a,H(a))},H=function(a){return"function"==typeof a},t=function(a){return s("not an array : "+a,a instanceof Array)},x=function(a){return s("no arguments supported",0===a.length)},y=function(a){return s("not a string : "+a,"string"==typeof a)},Q=function(a,b){return function(){var c;return c=1<=arguments.length?bb.call(arguments,0):[],a.apply(null,b.concat(c))}},N=function(a){return a instanceof l&&(a=Z.always(a)),w(a),a},L=function(a){return a=Array.prototype.slice.call(a),M.apply(null,a)},M=Y(function(){var a,b;return b=arguments[0],a=2<=arguments.length?bb.call(arguments,1):[],H(b)?a.length?Q(b,a):b:G(b)?U(b,a):Z.always(b)}),K=function(a,b){return M.apply(null,[a].concat(bb.call(b)))},G=function(a){return"string"==typeof a&&a.length>1&&"."===a.charAt(0)},a.isFieldKey=G,U=function(a,b){var c,d;return d=a.slice(1).split("."),c=Z.map(X(b),d),function(b){var d,e;for(d=0,e=c.length;e>d;d++)a=c[d],b=a(b);return b}},X=function(a){return function(b){return function(c){var d;return null==c?void 0:(d=c[b],H(d)?d.apply(c,a):d)}}},V=function(a){return a.slice(1)},S=function(a){var b;return H(a)?a:G(a)?(b=V(a),function(a,c){return a[b](c)}):s("not a function or a field key: "+a,!1)},W=function(a){return a instanceof p||a===k?a:new p(a)},Z={head:function(a){return a[0]},always:function(a){return function(){return a}},negate:function(a){return function(b){return!a(b)}},empty:function(a){return 0===a.length},tail:function(a){return a.slice(1,a.length)},filter:function(a,b){var c,d,e,f;for(c=[],e=0,f=b.length;f>e;e++)d=b[e],a(d)&&c.push(d);return c},map:function(a,b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a(c));return f},each:function(a,b){var c,d,e;e=[];for(c in a)d=a[c],e.push(b(c,d));return e},toArray:function(a){return a instanceof Array?a:[a]},contains:function(a,b){return-1!==E(a,b)},id:function(a){return a},last:function(a){return a[a.length-1]},all:function(a,b){var c,d,e;for(null==b&&(b=Z.id),d=0,e=a.length;e>d;d++)if(c=a[d],!b(c))return!1;return!0},any:function(a,b){var c,d,e;for(null==b&&(b=Z.id),d=0,e=a.length;e>d;d++)if(c=a[d],b(c))return!0;return!1},without:function(a,b){return Z.filter(function(b){return b!==a},b)},remove:function(a,b){var c;return c=E(b,a),c>=0?b.splice(c,1):void 0},fold:function(a,b,c){var d,e,f;for(e=0,f=a.length;f>e;e++)d=a[e],b=c(b,d);return b},cached:function(a){var b;return b=k,function(){return b===k&&(b=a(),a=null),b}}},a._=Z,a.scheduler={setTimeout:function(a,b){return setTimeout(a,b)},setInterval:function(a,b){return setInterval(a,b)},clearInterval:function(a){return clearInterval(a)},now:function(){return(new Date).getTime()}},"undefined"!=typeof module&&null!==module?(module.exports=a,a.Bacon=a):("undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return a}),this.Bacon=a)}.call(this),"undefined"!=typeof module&&require.main===module)var oldprocess=process;"object"==typeof module&&module.exports&&require("./stdlib"),function(root){function Node(a,b,c){return this instanceof Node?(this.type=a,this.key=b||a,this.text=c||b||a,void 0):new Node(a,b,c)}function Refprop(a,b,c){return this instanceof Refprop?(Node.call(this,a,b,c),void 0):new Refprop(a,b,c)}function quoteIfString(a){return"string"==typeof a?(a=a.replace(/"/g,'\\"'),'"'+a+'"'):a}function first(a){return a[0]}function last(a){return a[a.length-1]}function rest(a,b){b||(b=1);for(var c=[],d=b;d<a.length;++d)c.push(a[d]);return c}function wrapMacro(a){return function(b,c){return process(a(b),c)}}function deepToConstructionString(a){for(var b="[",c=!0,d=0;d<a.length;++d){var e=a[d];c?c=!1:b+=",",b+=e instanceof Array?"~"==e[0].type?process(e[1]):deepToConstructionString(e):e.toConstructionString()}return b+"]"}function process(a,b){if(!a)return null;var c=lookupProcessor(a);if(!c)throw"Illegal state.  No processor for "+a;return c(a,b)}function lookupProcessor(a){if(a instanceof Node)return returnText;var b=a[0];if(b instanceof Array)return processors.fncall;if("string"==a[0].type||"number"==a[0].type)return processors.refprop;var c=macros[b.key];return c?c:(c=processors[b.key])?c:(c=processors[b.type],c?c:processors.fncall)}function returnText(a){return a.toString()}Node.prototype.toString=function(){return this.text},Node.prototype.toConstructionString=function(){var a=quoteIfString(this.key),b=quoteIfString(this.text);return"Node('"+this.type+"', "+a+", "+b+")"},Refprop.prototype=Object.create(Node.prototype),Refprop.prototype.toString=function(){return this.text.substring(1)},Refprop.prototype.toConstructionString=function(){var a=quoteIfString(this.key),b=quoteIfString(this.text);return"Refprop('"+this.type+"', "+a+", "+b+")"},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.some||(Array.prototype.some=function(a){"use strict";if(null==this)throw new TypeError;var b,c,d=Object(this),e=d.length>>>0;if("function"!=typeof a)throw new TypeError;for(b=arguments[1],c=0;e>c;c++)if(c in d&&a.call(b,d[c],c,d))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){"use strict";var c,d;for(c=0,d=this.length;d>c;++c)c in this&&a.call(b,this[c],c,this)});var macros={};macros.defmacro=function(list,userdata){var name=list[1];list=list.slice(0).splice(2),list.unshift(Node("fn"));var str=process(list,userdata);return eval("var __tempMacro = "+str),name in macros&&console.error("Macro "+name+" is being re-defined"),macros[name]=wrapMacro(__tempMacro),"undefined"!=typeof ms_dumpMacros&&ms_dumpMacros===!0?"macros['"+name+"'] = wrapMacro("+str+");\n":""},macros["`"]=function(a){return a=a[1],deepToConstructionString(a)},macros.defn=function(a,b){return process([Node("def"),a[1],[Node("fn"),a[2]].concat(rest(a,3))],b)},macros.when=function(a,b){return process([Node("if"),a[1],[Node("do")].concat(rest(a,2))],b)},macros.do=function(a,b){return process([[Node("fn"),[]].concat(rest(a,1))],b)},macros.obj=function(a){for(var b=[Node("jsobject")],c=1;c<a.length;++c)a[c],a[c][1]instanceof Array&&(b.push(a[c][0]),b.push([Node("fn"),a[c][1]].concat(rest(a[c],2))));return process(b)},macros.type=function(a,b){var c,d="(function() { function "+a[1]+"(",e=a[2][0];"jsobject"==e.type?(c=3,e=a[2]):(c=2,e=[]);for(var f,g="",h=c;h<a.length;++h)"ctor"==a[h][0].key?f=a[h]:g+=a[1]+".prototype."+a[h][0]+" = function("+processors.fnparams(a[h][1],b)+") {"+processors.fnbody(rest(a[h],2),b)+"};\n";d+=f?processors.fnparams(f[1],b)+") {"+processors.fnbody(rest(f,2).concat([Node("id","this")]),b)+"}\n":"){}\n";for(var i,j,h=2;h<e.length;h+=2)"extend"==e[h-1].key?i=e[h]:"mix"==e[h-1].key&&(j=e[h]);return i&&(d+=a[1]+".prototype = Object.create("+process(i)+");\n"),d+=g,j&&(d+="extend("+a[1]+".prototype, "+processors.parameters(rest(j,1),b)+");\n"),d+"return "+a[1]+"; })()"},macros.deftype=function(a,b){return process([Node("def"),a[1],[Node("fncall","type")].concat(rest(a,1))],b)},function(){return macros["!!"]=wrapMacro(function(a){return[Node("fncall","let","let"),[Node("fncall","obj","obj"),get(a,1),Node("id","newValue","newValue"),get(a,3),Node("id","oldValue","oldValue"),[get(a,2),Node("id","obj","obj")]],[Node("fncall","!","!"),[get(a,2),Node("id","obj","obj")],Node("id","newValue","newValue")],[Node("fncall","msdispatch.propChange","msdispatch.propChange"),Node("id","obj","obj"),get(a,2),Node("id","newValue","newValue"),Node("id","oldValue","oldValue")],Node("id","newValue","newValue")]}),macros["assoc!"]=wrapMacro(function(a){return[Node("fncall","let","let"),[Node("fncall","obj","obj"),get(a,1)],[Node("fncall","!","!"),Node("id","obj","obj"),get(a,2),get(a,3)],Node("id","obj","obj")]})}(),oldprocess&&(process.argv=oldprocess.argv,process.exit=oldprocess.exit);var processors={number:returnText,id:returnText,string:returnText,mathy:function(a,b){var c,d,e=first(a).text,f=rest(a),g=e;switch(e){case"=":c="eq",g="===";break;case"+":c="plus";break;case"-":c="minus";break;case"*":c="mult";break;case">":c="gt";break;case"<":c="lt";break;case">=":c="gte";break;case"<=":c="lte";break;case"/":c="divide";break;case"not":d="!"}var h=f.length;return d?d+process(f[0],b):2==h?"("+process(f[0],b)+g+process(f[1],b)+")":1==h?"u"+c+"("+processors.parameters(f,b)+")":c+".call(null, "+processors.parameters(f,b)+")"}};processors.pgm=function(a,b){var c="";b=b||{};var d="undefined"!=typeof ms_unwrap&&ms_unwrap===!0?!0:!1;return d||(c="(function() {"),b.unwrap=d,c+=processors.fnbody(a,b),c+(d?"":"})();")},processors.fnbody=function(a,b){var c="";return a.forEach(function(d,e){e==a.length-1?d instanceof Array&&("def"==d[0].key||"defn"==d[0].key)?(c+=process(d,b)+";\n",b.unwrap||(c+="return "),c+=d[1]+";\n"):(b.unwrap||(c+="return "),c+=process(d,b)+";\n"):c+=process(d,b)+";\n"}),c},processors.if=function(a,b){return"("+process(a[1],b)+" ? "+process(a[2],b)+" : "+process(a[3],b)+")\n"},processors.fncall=function(a,b){return a[0]instanceof Array?"("+process(a[0],b)+")("+processors.parameters(rest(a),b)+")":a[0]+"("+processors.parameters(rest(a),b)+")"},processors.let=function(a,b){return"(function() { "+processors.bindings(a[1],b)+"\n"+processors.fnbody(rest(a,2),b)+"\n})()"},processors.new=function(a,b){return"new "+process(a[1],b)+"("+processors.parameters(rest(a,2),b)+")"},processors.parameters=function(a,b){var c="",d=!0;return a.forEach(function(a){d?d=!1:c+=",",c+="refprop"==a.type?'"'+a.toString()+'"':process(a,b)}),c},processors.loop=function(a,b){return"(function() { var __looping, __loopResult; "+processors.bindings(a[1],b)+"\n"+"do { "+"__looping = false;\n"+processors.loopbody(rest(a,2),a[1])+"} while(__looping);\n"+"return __loopResult;})()"},processors.loopbody=function(a,b){var c="";return a.forEach(function(d,e){e==a.length-1&&(c+="__loopResult = "),c+=process(d,b)+";\n"}),c},processors.bindings=function(a,b){for(var c="",d=1;d<a.length;d+=2)c+="var "+a[d-1]+" = "+process(a[d],b)+";\n";return c},processors.recur=function(a,b){var c="(__looping = true) && false";return a[1]&&(c+=processors.recurparams(rest(a),b)),c},processors.recurparams=function(a,b){for(var c="",d=0,e=0;d<a.length;++d,e+=2)c+="|| ("+b[e]+" = "+process(a[d],b)+") && false";
return c},processors.jsobject=function(a,b){for(var c="{",d=!0,e=2;e<a.length;e+=2)d?d=!1:c+=",",c+=a[e-1]+":"+process(a[e],b);return c+"}"},processors.jsarray=function(a,b){for(var c="[",d=!0,e=1;e<a.length;++e){var f=a[e];d?d=!1:c+=",",c+=process(f,b)}return c+"]"},processors.switch=function(a,b){var c=a[1],d=rest(a,2),e="(function() {\n var __res;";e+="switch ("+process(c,b)+") {\n";for(var f=1;f<d.length;f+=2)e+="case "+process(d[f-1],b)+":\n"+"__res = "+process(d[f],b)+"break;\n";return e+"\n}\n return __res;})()"},processors["!"]=function(a,b){return 4==a.length?"("+processors.refprop([a[2],a[1]],b)+" = "+process(a[3],b)+")":"("+process(a[1],b)+" = "+process(a[2],b)+")"},processors.refprop=function(a,b){return"refprop"==a[0].type?"("+process(a[1],b)+")."+a[0]:"("+process(a[1],b)+")["+process(a[0])+"]"},processors.def=function(a,b){return"var "+a[1]+" = "+process(a[2],b)},processors.mcall=function(a,b){return"("+process(a[1],b)+")"+a[0]+"("+processors.parameters(rest(a,2),b)+")"},processors.fn=function(a,b){return"function("+processors.fnparams(a[1],b)+") {\n"+processors.fnbody(rest(a,2),b)+"}"},processors.fnparams=function(a){var b=!0,c="";return a.forEach(function(a){b?b=!1:c+=",",c+=a}),c};var mochascriptParser=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,pgm:3,explisti:4,ENDOFFILE:5,exp:6,sexp:7,LPAREN:8,RPAREN:9,mathy:10,MATHY:11,id:12,NUMBER:13,STRING:14,jsdata:15,tilde:16,backtick:17,mcall:18,propaccess:19,TILDE:20,BACKTICK:21,jsobject:22,jsarray:23,LCURLY:24,jskeyvalpairs:25,RCURLY:26,jskey:27,COLON:28,LBRACKET:29,jsarrayentries:30,RBRACKET:31,ID:32,MCALL:33,PROPACCESS:34,$accept:0,$end:1},terminals_:{2:"error",5:"ENDOFFILE",8:"LPAREN",9:"RPAREN",11:"MATHY",13:"NUMBER",14:"STRING",20:"TILDE",21:"BACKTICK",24:"LCURLY",26:"RCURLY",28:"COLON",29:"LBRACKET",31:"RBRACKET",32:"ID",33:"MCALL",34:"PROPACCESS"},productions_:[0,[3,2],[4,2],[4,0],[7,3],[10,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[16,2],[17,2],[15,1],[15,1],[22,3],[25,4],[25,0],[27,1],[27,1],[23,3],[30,2],[30,0],[12,1],[18,1],[19,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return processors.pgm(f[g-1]);case 2:this.$=[f[g-1]].concat(f[g]);break;case 3:this.$=[];break;case 4:f[g-1].length&&"id"==f[g-1][0].type&&(f[g-1][0].type="fncall"),this.$=f[g-1];break;case 5:this.$=Node("mathy",f[g]);break;case 6:this.$=f[g];break;case 7:this.$=Node("number",a);break;case 8:this.$=Node("string",a);break;case 9:this.$=f[g];break;case 10:this.$=f[g];break;case 11:this.$=f[g];break;case 12:this.$=f[g];break;case 13:this.$=f[g];break;case 14:this.$=f[g];break;case 15:this.$=f[g];break;case 16:this.$=[Node("~",""),f[g]];break;case 17:this.$=[Node("`"),f[g]];break;case 18:this.$=f[g];break;case 19:this.$=f[g];break;case 20:this.$=[Node("jsobject","")].concat(f[g-1]);break;case 21:this.$=[f[g-3],f[g-1]].concat(f[g]);break;case 22:this.$=[];break;case 23:this.$=f[g];break;case 24:this.$=Node("string",a);break;case 25:this.$=[Node("jsarray","")].concat(f[g-1]);break;case 26:this.$=[f[g-1]].concat(f[g]);break;case 27:this.$=[];break;case 28:this.$=Node("id",a);break;case 29:this.$=Node("mcall",a);break;case 30:this.$=Refprop("refprop",a)}},table:[{3:1,4:2,5:[2,3],6:3,7:10,8:[1,19],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],32:[1,14],33:[1,21],34:[1,22]},{1:[3]},{5:[1,25]},{4:26,5:[2,3],6:3,7:10,8:[1,19],9:[2,3],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],32:[1,14],33:[1,21],34:[1,22]},{5:[2,6],8:[2,6],9:[2,6],11:[2,6],13:[2,6],14:[2,6],20:[2,6],21:[2,6],24:[2,6],26:[2,6],29:[2,6],31:[2,6],32:[2,6],33:[2,6],34:[2,6]},{5:[2,7],8:[2,7],9:[2,7],11:[2,7],13:[2,7],14:[2,7],20:[2,7],21:[2,7],24:[2,7],26:[2,7],29:[2,7],31:[2,7],32:[2,7],33:[2,7],34:[2,7]},{5:[2,8],8:[2,8],9:[2,8],11:[2,8],13:[2,8],14:[2,8],20:[2,8],21:[2,8],24:[2,8],26:[2,8],29:[2,8],31:[2,8],32:[2,8],33:[2,8],34:[2,8]},{5:[2,9],8:[2,9],9:[2,9],11:[2,9],13:[2,9],14:[2,9],20:[2,9],21:[2,9],24:[2,9],26:[2,9],29:[2,9],31:[2,9],32:[2,9],33:[2,9],34:[2,9]},{5:[2,10],8:[2,10],9:[2,10],11:[2,10],13:[2,10],14:[2,10],20:[2,10],21:[2,10],24:[2,10],26:[2,10],29:[2,10],31:[2,10],32:[2,10],33:[2,10],34:[2,10]},{5:[2,11],8:[2,11],9:[2,11],11:[2,11],13:[2,11],14:[2,11],20:[2,11],21:[2,11],24:[2,11],26:[2,11],29:[2,11],31:[2,11],32:[2,11],33:[2,11],34:[2,11]},{5:[2,12],8:[2,12],9:[2,12],11:[2,12],13:[2,12],14:[2,12],20:[2,12],21:[2,12],24:[2,12],26:[2,12],29:[2,12],31:[2,12],32:[2,12],33:[2,12],34:[2,12]},{5:[2,13],8:[2,13],9:[2,13],11:[2,13],13:[2,13],14:[2,13],20:[2,13],21:[2,13],24:[2,13],26:[2,13],29:[2,13],31:[2,13],32:[2,13],33:[2,13],34:[2,13]},{5:[2,14],8:[2,14],9:[2,14],11:[2,14],13:[2,14],14:[2,14],20:[2,14],21:[2,14],24:[2,14],26:[2,14],29:[2,14],31:[2,14],32:[2,14],33:[2,14],34:[2,14]},{5:[2,15],8:[2,15],9:[2,15],11:[2,15],13:[2,15],14:[2,15],20:[2,15],21:[2,15],24:[2,15],26:[2,15],29:[2,15],31:[2,15],32:[2,15],33:[2,15],34:[2,15]},{5:[2,28],8:[2,28],9:[2,28],11:[2,28],13:[2,28],14:[2,28],20:[2,28],21:[2,28],24:[2,28],26:[2,28],28:[2,28],29:[2,28],31:[2,28],32:[2,28],33:[2,28],34:[2,28]},{5:[2,18],8:[2,18],9:[2,18],11:[2,18],13:[2,18],14:[2,18],20:[2,18],21:[2,18],24:[2,18],26:[2,18],29:[2,18],31:[2,18],32:[2,18],33:[2,18],34:[2,18]},{5:[2,19],8:[2,19],9:[2,19],11:[2,19],13:[2,19],14:[2,19],20:[2,19],21:[2,19],24:[2,19],26:[2,19],29:[2,19],31:[2,19],32:[2,19],33:[2,19],34:[2,19]},{6:27,7:10,8:[1,19],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],32:[1,14],33:[1,21],34:[1,22]},{6:28,7:10,8:[1,19],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],32:[1,14],33:[1,21],34:[1,22]},{4:29,6:3,7:10,8:[1,19],9:[2,3],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],32:[1,14],33:[1,21],34:[1,22]},{5:[2,5],8:[2,5],9:[2,5],11:[2,5],13:[2,5],14:[2,5],20:[2,5],21:[2,5],24:[2,5],26:[2,5],29:[2,5],31:[2,5],32:[2,5],33:[2,5],34:[2,5]},{5:[2,29],8:[2,29],9:[2,29],11:[2,29],13:[2,29],14:[2,29],20:[2,29],21:[2,29],24:[2,29],26:[2,29],29:[2,29],31:[2,29],32:[2,29],33:[2,29],34:[2,29]},{5:[2,30],8:[2,30],9:[2,30],11:[2,30],13:[2,30],14:[2,30],20:[2,30],21:[2,30],24:[2,30],26:[2,30],29:[2,30],31:[2,30],32:[2,30],33:[2,30],34:[2,30]},{12:32,14:[1,33],25:30,26:[2,22],27:31,32:[1,14]},{6:35,7:10,8:[1,19],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],30:34,31:[2,27],32:[1,14],33:[1,21],34:[1,22]},{1:[2,1]},{5:[2,2],9:[2,2]},{5:[2,16],8:[2,16],9:[2,16],11:[2,16],13:[2,16],14:[2,16],20:[2,16],21:[2,16],24:[2,16],26:[2,16],29:[2,16],31:[2,16],32:[2,16],33:[2,16],34:[2,16]},{5:[2,17],8:[2,17],9:[2,17],11:[2,17],13:[2,17],14:[2,17],20:[2,17],21:[2,17],24:[2,17],26:[2,17],29:[2,17],31:[2,17],32:[2,17],33:[2,17],34:[2,17]},{9:[1,36]},{26:[1,37]},{28:[1,38]},{28:[2,23]},{28:[2,24]},{31:[1,39]},{6:35,7:10,8:[1,19],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],30:40,31:[2,27],32:[1,14],33:[1,21],34:[1,22]},{5:[2,4],8:[2,4],9:[2,4],11:[2,4],13:[2,4],14:[2,4],20:[2,4],21:[2,4],24:[2,4],26:[2,4],29:[2,4],31:[2,4],32:[2,4],33:[2,4],34:[2,4]},{5:[2,20],8:[2,20],9:[2,20],11:[2,20],13:[2,20],14:[2,20],20:[2,20],21:[2,20],24:[2,20],26:[2,20],29:[2,20],31:[2,20],32:[2,20],33:[2,20],34:[2,20]},{6:41,7:10,8:[1,19],10:11,11:[1,20],12:4,13:[1,5],14:[1,6],15:7,16:8,17:9,18:12,19:13,20:[1,17],21:[1,18],22:15,23:16,24:[1,23],29:[1,24],32:[1,14],33:[1,21],34:[1,22]},{5:[2,25],8:[2,25],9:[2,25],11:[2,25],13:[2,25],14:[2,25],20:[2,25],21:[2,25],24:[2,25],26:[2,25],29:[2,25],31:[2,25],32:[2,25],33:[2,25],34:[2,25]},{31:[2,26]},{12:32,14:[1,33],25:42,26:[2,22],27:31,32:[1,14]},{26:[2,21]}],defaultActions:{25:[2,1],32:[2,23],33:[2,24],40:[2,26],42:[2,21]},parseError:function(a,b){if(!b.recoverable)throw new Error(a);this.trace(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||m,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0,l=2,m=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var n=this.lexer.yylloc;f.push(n);var o=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var p,q,r,s,t,u,v,w,x,y={};;){if(r=d[d.length-1],this.defaultActions[r]?s=this.defaultActions[r]:((null===p||"undefined"==typeof p)&&(p=b()),s=g[r]&&g[r][p]),"undefined"==typeof s||!s.length||!s[0]){var z="";x=[];for(u in g[r])this.terminals_[u]&&u>l&&x.push("'"+this.terminals_[u]+"'");z=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(i+1)+": Unexpected "+(p==m?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(z,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:n,expected:x})}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:d.push(p),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(s[1]),p=null,q?(p=q,q=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,n=this.lexer.yylloc,k>0&&k--);break;case 2:if(v=this.productions_[s[1]][1],y.$=e[e.length-v],y._$={first_line:f[f.length-(v||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(v||1)].first_column,last_column:f[f.length-1].last_column},o&&(y._$.range=[f[f.length-(v||1)].range[0],f[f.length-1].range[1]]),t=this.performAction.call(y,h,j,i,this.yy,s[1],e,f),"undefined"!=typeof t)return t;v&&(d=d.slice(0,2*-1*v),e=e.slice(0,-1*v),f=f.slice(0,-1*v)),d.push(this.productions_[s[1]][0]),e.push(y.$),f.push(y._$),w=g[d[d.length-2]][d[d.length-1]],d.push(w);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d,e;if(this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0))),d=a[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],c=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c)return c;if(this._backtrack){for(var f in e)this[f]=e[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");for(var e=this._currentRules(),f=0;f<e.length;f++)if(c=this._input.match(this.rules[e[f]]),c&&(!b||c[0].length>b[0].length)){if(b=c,d=f,this.options.backtrack_lexer){if(a=this.test_match(c,e[f]),a!==!1)return a;if(this._backtrack){b=!1;continue}return!1}if(!this.options.flex)break}return b?(a=this.test_match(b,e[d]),a!==!1?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){var a=this.conditionStack.length-1;return a>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){return a=this.conditionStack.length-1-Math.abs(a||0),a>=0?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c,d){switch(c){case 0:break;case 1:return 8;case 2:return 9;case 3:return 20;case 4:return 21;case 5:return 14;case 6:return 14;case 7:return 13;case 8:return 11;case 9:return 33;case 10:return 34;case 11:return 32;case 12:return 28;case 13:return"COMMA";case 14:return 24;case 15:return 26;case 16:return 29;case 17:return 31;case 18:return 11;case 19:return 11;case 20:return 11;case 21:return 11;case 22:return 11;case 23:return 11;case 24:return 11;case 25:return 11;case 26:return 11;case 27:break;case 28:return 5}},rules:[/^(?:;.*)/,/^(?:\()/,/^(?:\))/,/^(?:~)/,/^(?:`)/,/^(?:"[^"]*")/,/^(?:'[^']*')/,/^(?:([-]?[0-9]*\.?[0-9]+))/,/^(?:not\b)/,/^(?:(\.[a-zA-Z$_!][a-zA-Z0-9$_!.]*))/,/^(?:(:[a-zA-Z$_!][a-zA-Z0-9$_!.]*))/,/^(?:([a-zA-Z$_!][a-zA-Z0-9$_!.]*))/,/^(?::)/,/^(?:,)/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:=)/,/^(?:\+)/,/^(?:-)/,/^(?:\*)/,/^(?:>)/,/^(?:<)/,/^(?:>=)/,/^(?:<=)/,/^(?:\/)/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:!0}}};return a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=mochascriptParser,exports.Parser=mochascriptParser.Parser,exports.parse=function(){return mochascriptParser.parse.apply(mochascriptParser,arguments)},exports.main=function(a){a[1]||(console.log("Usage: "+a[0]+" FILE"),process.exit(1));var b=require("fs").readFileSync(require("path").normalize(a[1]),"utf8");return exports.parser.parse(b)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1))),root.mochascriptParser=mochascriptParser}.call(this,this);